<app-admin-header></app-admin-header>
<app-admin-sidebar></app-admin-sidebar>

<div class="main-content">
  <div class="content-wrapper px-4 py-3">
    <!-- Dashboard Header -->
    <div class="dashboard-header">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <h2 class="fw-bold text-dark mb-0">Project Portfolio</h2>
          <p class="text-muted mb-0">Manage and track your ongoing projects</p>
        </div>
        <button class="btn btn-dark btn-with-icon" [routerLink]="['/projects/new']">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
            <path d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"/>
          </svg>
          <span>New Project</span>
        </button>
      </div>
    </div>

    <!-- Main Content -->
    <div class="projects-container mt-4">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-container">
        <div class="spinner-container">
          <div class="spinner-border text-primary" role="status"></div>
        </div>
        <p class="mt-3 text-center">Loading your projects...</p>
      </div>
      
      <!-- Error State -->
      <div *ngIf="errorMessage" class="error-container">
        <div class="alert custom-alert-error">
          <div class="alert-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
              <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/>
              <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
            </svg>
          </div>
          <div class="alert-content">
            <h5>Unable to load projects</h5>
            <p>{{ errorMessage }}</p>
            <button class="btn btn-outline-danger" (click)="loadProjects()">Try Again</button>
          </div>
        </div>
      </div>
      
      <!-- Projects List -->
      <div *ngIf="!isLoading && !errorMessage">
        <!-- Empty State -->
        <div *ngIf="projects.length === 0" class="empty-state">
          <div class="empty-state-content">
            <div class="empty-state-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
                <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
                <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
              </svg>
            </div>
            <h3>No Projects Found</h3>
            <p class="text-muted">Start by creating your first project to track and manage your work.</p>
            <button class="btn btn-primary btn-lg mt-3" [routerLink]="['/projects/new']">Create Project</button>
          </div>
        </div>
        
        <!-- Projects Grid -->
        <div *ngIf="projects.length > 0" class="row g-4">
          <div *ngFor="let project of projects" class="col-xl-4 col-md-6">
            <div class="premium-card">
              <div class="premium-card-header">
                <div class="project-status-wrapper">
                  <!--<div class="status-indicator" [ngClass]="{
                    'status-completed': project.status === 'Completed',
                    'status-in-progress': project.status === 'In Progress',
                    'status-overdue': project.status === 'Overdue',
                    'status-planning': project.status === 'Planning'
                  }"></div>
                  <span class="status-text" [ngClass]="{
                    'text-success': project.status === 'Completed',
                    'text-warning': project.status === 'In Progress',
                    'text-danger': project.status === 'Overdue',
                    'text-info': project.status === 'Planning'
                  }">{{ project.status }}</span>
                </div> -->
                <div class="project-title-wrapper">
                  <h3 class="project-title">{{ project.title }}</h3>
                </div>
              </div>
              
              <div class="premium-card-body">
                <div class="project-metadata">
                  <div class="metadata-item">
                    <div class="metadata-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664z"/>
                      </svg>
                    </div>
                    <div class="metadata-content">
                      <span class="metadata-label">Owner</span>
                      <span class="metadata-value">{{ project.owner }}</span>
                    </div>
                  </div>
                  
                  <div class="metadata-item">
                    <div class="metadata-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
                        <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0z"/>
                        <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1zm0 5.586 7 7L13.586 9l-7-7H2z"/>
                      </svg>
                    </div>
                    <div class="metadata-content">
                      <span class="metadata-label">Type</span>
                      <span class="metadata-value">{{ project.type }}</span>
                    </div>
                  </div>
                  
                  <div class="metadata-item">
                    <div class="metadata-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar" viewBox="0 0 16 16">
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
                      </svg>
                    </div>
                    <div class="metadata-content">
                      <span class="metadata-label">Due Date</span>
                      <span class="metadata-value">{{ project.dueDate | date }}</span>
                    </div>
                  </div>
                </div>
                
                <div class="project-description">
                  <p>{{ project.description }}</p>
                </div>
              </div>
              
              <div class="premium-card-footer">
                <button class="btn btn-sm btn-danger-soft" (click)="onDeleteProject(project.id)">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                    <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"/>
                    <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"/>
                  </svg>
                  <span>Delete</span>
                </button>
                <button class="btn btn-sm btn-primary" [routerLink]="['/projects', project.id]">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">
                    <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                    <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
                  </svg>
                  <span>Details</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <router-outlet></router-outlet>
</div>

<app-admin-footer></app-admin-footer>

<link rel="icon" type="image/x-icon" href="favicon.ico">
<!-- Admin-specific styles -->
<link href="/assets/admin-template/img/favicon.png" rel="shortcut icon" type="image/png">
<!-- Styles Include -->
<link rel="stylesheet" href="/assets/admin-template/css/main.css" id="stylesheet">

<!-- Core JS -->
<script src="/assets/admin-template/js/jquery-3.6.0.min.js"></script>
<script src="/assets/admin-template/js/bootstrap.bundle.min.js"></script>

<!-- jQuery UI Kit -->
<script src="/assets/plugins/jquery_ui/jquery-ui.1.12.1.min.js"></script>

<!-- ApexChart -->
<script src="/assets/plugins/apexchart/apexcharts.min.js"></script>
<script src="/assets/plugins/apexchart/apexchart-inits/apexcharts-analytics-2.js"></script>
<script src="/assets/plugins/apexchart/apexchart-inits/apexcharts-analytics.js"></script>
<script src="/assets/plugins/apexchart/apexchart-inits/apexcharts-attendances.js"></script>
<script src="/assets/plugins/apexchart/apexchart-inits/apexcharts-cards.js"></script> 
<script src="/assets/plugins/apexchart/apexchart-inits/apexcharts-hr.js"></script>
<script src="/assets/plugins/apexchart/apexchart-inits/apexcharts-ecommerce-2.js"></script>

<!-- Peity  -->
<script src="/assets/plugins/peity/jquery.peity.min.js"></script>
<script src="/assets/plugins/peity/piety-init.js"></script>

<!-- Select 2 -->
<script src="/assets/plugins/select2/js/select2.min.js"></script>

<!-- Datatables -->
<script src="/assets/plugins/datatables/js/jquery.dataTables.min.js"></script>
<script src="/assets/plugins/datatables/js/datatables.init.js"></script>

<!-- Date Picker -->
<script src="/assets/plugins/flatpickr/flatpickr.min.js"></script>

<!-- Dropzone -->
<script src="/assets/plugins/dropzone/dropzone.min.js"></script>
<script src="/assets/plugins/dropzone/dropzone_custom.js"></script>

<!-- TinyMCE -->
<script src="/assets/plugins/tinymce/tinymce.min.js"></script>
<script src="/assets/plugins/prism/prism.js"></script>
<script src="/assets/plugins/jquery-repeater/jquery.repeater.js"></script>

<!-- Sweet Alert -->
<script src="/assets/plugins/sweetalert/sweetalert2.min.js"></script>
<script src="/assets/plugins/sweetalert/sweetalert2-init.js"></script>
<script src="/assets/plugins/nicescroll/jquery.nicescroll.min.js"></script>

<!-- Snippets JS -->
<script src="/assets/admin-template/js/snippets.js"></script>

<!-- Theme Custom JS -->
<script src="/assets/admin-template/js/theme.js"></script>