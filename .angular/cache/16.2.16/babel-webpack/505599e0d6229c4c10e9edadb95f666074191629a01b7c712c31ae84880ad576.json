{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/presence.service\";\nimport * as i2 from \"src/app/core/services/employee.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction PresenceFormComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const emp_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", emp_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(emp_r2.name);\n  }\n}\nexport class PresenceFormComponent {\n  constructor(presenceService, employeeService, router, route) {\n    this.presenceService = presenceService;\n    this.employeeService = employeeService;\n    this.router = router;\n    this.route = route;\n    this.employees = [];\n    this.isEditMode = false;\n    this.presenceId = null;\n  }\n  ngOnInit() {\n    this.loadEmployees();\n    this.presenceId = this.route.snapshot.paramMap.get('id');\n    this.isEditMode = !!this.presenceId;\n    if (this.isEditMode && this.presenceId) {\n      this.presenceService.getPresenceById(this.presenceId).subscribe({\n        next: data => this.presence = data,\n        error: err => console.error('Erreur chargement présence:', err)\n      });\n    }\n  }\n  loadEmployees() {\n    this.employeeService.getAllEmployees().subscribe({\n      next: data => this.employees = data,\n      error: err => console.error(err)\n    });\n  }\n  onSubmit() {\n    if (this.isEditMode && this.presenceId) {\n      this.presenceService.updatePresence(this.presenceId, this.presence).subscribe({\n        next: () => this.router.navigate(['/admin/attendances']),\n        error: err => console.error('Erreur MAJ présence', err)\n      });\n    } else {\n      this.presenceService.addPresence(this.presence).subscribe({\n        next: () => this.router.navigate(['/admin/attendances']),\n        error: err => console.error('Erreur ajout présence', err)\n      });\n    }\n  }\n  goBack() {\n    this.router.navigate(['/admin/attendances']);\n  }\n  static {\n    this.ɵfac = function PresenceFormComponent_Factory(t) {\n      return new (t || PresenceFormComponent)(i0.ɵɵdirectiveInject(i1.PresenceService), i0.ɵɵdirectiveInject(i2.EmployeeService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PresenceFormComponent,\n      selectors: [[\"app-presence-form\"]],\n      decls: 26,\n      vars: 7,\n      consts: [[1, \"card\", \"p-4\"], [1, \"mb-3\"], [3, \"ngSubmit\"], [\"presenceForm\", \"ngForm\"], [1, \"form-group\", \"mb-3\"], [\"for\", \"employeeId\"], [\"id\", \"employeeId\", \"name\", \"employeeId\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"date\"], [\"type\", \"date\", \"id\", \"date\", \"name\", \"date\", \"required\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"checkInTime\"], [\"type\", \"time\", \"id\", \"checkInTime\", \"name\", \"checkInTime\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"checkOutTime\"], [\"type\", \"time\", \"id\", \"checkOutTime\", \"name\", \"checkOutTime\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"ms-2\", 3, \"click\"], [3, \"value\"]],\n      template: function PresenceFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 2, 3);\n          i0.ɵɵlistener(\"ngSubmit\", function PresenceFormComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n          i0.ɵɵtext(7, \"Employ\\u00E9\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"select\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function PresenceFormComponent_Template_select_ngModelChange_8_listener($event) {\n            return ctx.presence.employeeId = $event;\n          });\n          i0.ɵɵtemplate(9, PresenceFormComponent_option_9_Template, 2, 2, \"option\", 7);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\", 8);\n          i0.ɵɵtext(12, \"Date\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(13, \"input\", 9);\n          i0.ɵɵlistener(\"ngModelChange\", function PresenceFormComponent_Template_input_ngModelChange_13_listener($event) {\n            return ctx.presence.date = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"div\", 4)(15, \"label\", 10);\n          i0.ɵɵtext(16, \"Heure d'entr\\u00E9e\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"input\", 11);\n          i0.ɵɵlistener(\"ngModelChange\", function PresenceFormComponent_Template_input_ngModelChange_17_listener($event) {\n            return ctx.presence.checkInTime = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"div\", 4)(19, \"label\", 12);\n          i0.ɵɵtext(20, \"Heure de sortie\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"input\", 13);\n          i0.ɵɵlistener(\"ngModelChange\", function PresenceFormComponent_Template_input_ngModelChange_21_listener($event) {\n            return ctx.presence.checkOutTime = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"button\", 14);\n          i0.ɵɵtext(23);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(24, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function PresenceFormComponent_Template_button_click_24_listener() {\n            return ctx.goBack();\n          });\n          i0.ɵɵtext(25, \"Annuler\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"\", ctx.isEditMode ? \"Modifier\" : \"Ajouter\", \" une pr\\u00E9sence\");\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"ngModel\", ctx.presence.employeeId);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.employees);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.presence.date);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.presence.checkInTime);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.presence.checkOutTime);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \", ctx.isEditMode ? \"Mettre \\u00E0 jour\" : \"Ajouter\", \" \");\n        }\n      },\n      dependencies: [i4.NgForOf],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","emp_r2","id","ɵɵadvance","ɵɵtextInterpolate","name","PresenceFormComponent","constructor","presenceService","employeeService","router","route","employees","isEditMode","presenceId","ngOnInit","loadEmployees","snapshot","paramMap","get","getPresenceById","subscribe","next","data","presence","error","err","console","getAllEmployees","onSubmit","updatePresence","navigate","addPresence","goBack","ɵɵdirectiveInject","i1","PresenceService","i2","EmployeeService","i3","Router","ActivatedRoute","selectors","decls","vars","consts","template","PresenceFormComponent_Template","rf","ctx","ɵɵlistener","PresenceFormComponent_Template_form_ngSubmit_3_listener","PresenceFormComponent_Template_select_ngModelChange_8_listener","$event","employeeId","ɵɵtemplate","PresenceFormComponent_option_9_Template","PresenceFormComponent_Template_input_ngModelChange_13_listener","date","PresenceFormComponent_Template_input_ngModelChange_17_listener","checkInTime","PresenceFormComponent_Template_input_ngModelChange_21_listener","checkOutTime","PresenceFormComponent_Template_button_click_24_listener","ɵɵtextInterpolate1"],"sources":["C:\\Users\\USER\\Desktop\\OumaimaPI\\projetttttttt\\projetttttttt\\src\\app\\features\\components\\Presence\\presence-form\\presence-form.component.ts","C:\\Users\\USER\\Desktop\\OumaimaPI\\projetttttttt\\projetttttttt\\src\\app\\features\\components\\Presence\\presence-form\\presence-form.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { EmployeeService } from 'src/app/core/services/employee.service';\nimport { PresenceService } from 'src/app/core/services/presence.service';\n\n@Component({\n  selector: 'app-presence-form',\n  templateUrl: './presence-form.component.html',\n  styleUrls: ['./presence-form.component.css']\n})\nexport class PresenceFormComponent {\n\n  \n\n  employees: any[] = [];\n  isEditMode: boolean = false;\n  presenceId: string | null = null;\n\n  constructor(\n    private presenceService: PresenceService,\n    private employeeService: EmployeeService,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {}\n\n  ngOnInit(): void {\n    this.loadEmployees();\n\n    this.presenceId = this.route.snapshot.paramMap.get('id');\n    this.isEditMode = !!this.presenceId;\n\n    if (this.isEditMode && this.presenceId) {\n      this.presenceService.getPresenceById(this.presenceId).subscribe({\n        next: (data) => this.presence = data,\n        error: (err) => console.error('Erreur chargement présence:', err)\n      });\n    }\n  }\n\n  loadEmployees() {\n    this.employeeService.getAllEmployees().subscribe({\n      next: (data) => this.employees = data,\n      error: (err) => console.error(err)\n    });\n  }\n\n  onSubmit(): void {\n    if (this.isEditMode && this.presenceId) {\n      this.presenceService.updatePresence(this.presenceId, this.presence).subscribe({\n        next: () => this.router.navigate(['/admin/attendances']),\n        error: (err) => console.error('Erreur MAJ présence', err)\n      });\n    } else {\n      this.presenceService.addPresence(this.presence).subscribe({\n        next: () => this.router.navigate(['/admin/attendances']),\n        error: (err) => console.error('Erreur ajout présence', err)\n      });\n    }\n  }\n\n  goBack(): void {\n    this.router.navigate(['/admin/attendances']);\n  }\n}\n","<div class=\"card p-4\">\n    <h3 class=\"mb-3\">{{ isEditMode ? 'Modifier' : 'Ajouter' }} une présence</h3>\n  \n    <form (ngSubmit)=\"onSubmit()\" #presenceForm=\"ngForm\">\n      <div class=\"form-group mb-3\">\n        <label for=\"employeeId\">Employé</label>\n        <select id=\"employeeId\" [(ngModel)]=\"presence.employeeId\" name=\"employeeId\" class=\"form-control\" required>\n          <option *ngFor=\"let emp of employees\" [value]=\"emp.id\">{{ emp.name }}</option>\n        </select>\n      </div>\n  \n      <div class=\"form-group mb-3\">\n        <label for=\"date\">Date</label>\n        <input type=\"date\" id=\"date\" class=\"form-control\" [(ngModel)]=\"presence.date\" name=\"date\" required />\n      </div>\n  \n      <div class=\"form-group mb-3\">\n        <label for=\"checkInTime\">Heure d'entrée</label>\n        <input type=\"time\" id=\"checkInTime\" class=\"form-control\" [(ngModel)]=\"presence.checkInTime\" name=\"checkInTime\" />\n      </div>\n  \n      <div class=\"form-group mb-3\">\n        <label for=\"checkOutTime\">Heure de sortie</label>\n        <input type=\"time\" id=\"checkOutTime\" class=\"form-control\" [(ngModel)]=\"presence.checkOutTime\" name=\"checkOutTime\" />\n      </div>\n  \n      <button type=\"submit\" class=\"btn btn-primary\">\n        {{ isEditMode ? 'Mettre à jour' : 'Ajouter' }}\n      </button>\n      <button type=\"button\" class=\"btn btn-secondary ms-2\" (click)=\"goBack()\">Annuler</button>\n    </form>\n  </div>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}